# Use java 8 base
FROM java:8

# Update package manager and install maven
RUN apt-get update
RUN apt-get install -yqq maven

# Create and set working directory
RUN mkdir -p /usr/jukebox/yoda
WORKDIR /usr/jukebox/yoda

# Copy project object model and source directory
COPY pom.xml /usr/jukebox/yoda
COPY src /usr/jukebox/yoda/src

# Build/verify mvn project
RUN ["mvn", "dependency:resolve"]
RUN ["mvn", "verify"]
RUN ["mvn", "package"]

# Make default entrypoint run App's main
ENTRYPOINT ["java", "-cp", "target/yoda-0.1-SNAPSHOT.jar", "life.jukebox.yoda.App"]
